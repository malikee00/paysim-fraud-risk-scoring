data:
  features_path: "data/processed_local/features_v2_full_sakti.parquet"

schema:
  step_col: "step"
  target_col: "isfraud" 

split:
  method: "temporal"
  train_max_step: 400
  test_min_step: 401

training:
  train_cap_rows: 6362620
  drop_cols: ["step"]

model:
  name: "hgb_v2_final_polish"
  type: "hgb"
  params:
    max_iter: 1000        # Naik dari 400 (Belajar lebih lama)
    learning_rate: 0.02   # Turun dari 0.05 (Lebih teliti/halus)
    max_depth: 15         # Naik dari 12 (Menangkap interaksi fitur yang lebih kompleks)
    min_samples_leaf: 30  # Sedikit lebih sensitif
    l2_regularization: 0.1 # Menjaga agar tidak overfitting meski belajar lama
    random_state: 42

thresholds:
  report: [0.1, 0.3, 0.5, 0.7, 0.9, 0.95]

artifacts:
  model_dir: "ml/models/v2_improved"
  report_md: "ml/reports/train_summary_v2_full_sample.md"

mlflow:
  enable: true
  tracking_uri: "mlruns"
  experiment_name: "paysim-fraud-risk-scoring"
  run_name: "v2_hgb_final_polish"
  tags:
    feature_version: "v2"

evaluation:
  pr_curve_png: "ml/reports/pr_curve.png"
  thresholds_yaml: "ml/reports/thresholds.yaml"
  eval_report_md: "ml/reports/eval_report.md"

  candidate_thresholds: [0.05,0.10,0.15,0.20,0.25,0.30,0.35,0.40,0.45,0.50,0.55,0.60,0.65,0.70,0.75,0.80,0.85,0.90,0.95]

    # Decision policy: approve / review / block
    # score < T1  => APPROVE (low risk)
    # T1..T2      => REVIEW  (medium)
    # >= T2       => BLOCK   (high)
  policy:
    target_precision_T2: 0.995
    min_recall_T2: 0.70
    min_review_rate: 0.001
    max_review_rate: 0.005
    max_review_band_width: 0.35    

  segments:
    by_type_col: "type"            
    amount_col: "amount"           
    amount_bins: [0, 1000000, 5000000, 20000000, 999999999999] 
    user_activity_col: "tx_count_recent"  
    top_k: 5

  error_cases_csv: "ml/reports/error_cases.csv"
  error_top_k: 5
  error_amount_col: "amount"        
  error_id_cols: ["nameOrig", "nameDest"]   